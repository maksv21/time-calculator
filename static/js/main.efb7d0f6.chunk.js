(this["webpackJsonptime-calculator"]=this["webpackJsonptime-calculator"]||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r,i=n(8),o=n.n(i),a=n(9),c=n(0),u=n(12),l=n(69),s=n(70),d=n(71),f=n(27),v=n(13),b=function(e){var t=e.toString().split("."),n=t[0],r=t[1];return r?(r="0.".concat(r),r=Math.round(60*+r).toString(),r="0".concat(r).slice(-2)):r="00","".concat(n,":").concat(r)},p=function(e){var t=function(e){return e.replace(/\xf7/g,"/").replace(/\xd7/g,"*").replace(/(^[^\d]+)|([^\d]+$)/g,"").replace(/^0+\d/g,(function(e){return e.slice(-1)})).replace(/[^\d]0+\d/g,(function(e){return e.replace("0","")})).replace(/\d+:\d*/g,(function(e){var t=e.split(":").map((function(e){return+e}));return t[1]/=60,(t[0]+t[1]).toString()}))}(e);try{var n=new Function("return ".concat(t))();return n>Number.MAX_SAFE_INTEGER?{isCorrect:!1,error:"Error: Number is too big"}:{isCorrect:!0,value:b(n)}}catch(r){return{isCorrect:!1,error:"Error: Bad expression"}}},h="(\\d+:\\d*)",g=[{regExp:/[^\xf7\xd7\-+:.\d]/g,errorText:"Incorrect characters",isCritical:!0},{regExp:/\d{11,}/g,errorText:"Number is too big",isCritical:!0},{regExp:/[\xf7\xd7\-+:.]{2,}/g,errorText:"Two operators in a row",isCritical:!0},{regExp:/(\xf70+[^0-9]+)|(\xf70+$)/g,match:/\xf70+/,errorText:"Can't divide by zero",isCritical:!1},{regExp:/(\d*[.:]\d*){2,}/g,errorText:"Two separators in one number (: or .)",isCritical:!0},{regExp:new RegExp("".concat(h,"[\xd7\xf7]").concat(h),"g"),errorText:"Can't multiply or divide time",isCritical:!1}],j="$",m="#";!function(e){e[e.value=0]="value",e[e.error=1]="error",e[e.warning=2]="warning"}(r||(r={}));var O,w=function(e){return g.reduce((function(e,t){var n=t.isCritical?j:m;return e.valueWithErrors=e.valueWithErrors.replace(t.regExp,(function(r){return t.isCritical&&(e.criticalErrorsCount+=1),e.firstFoundError=e.firstFoundError||t.errorText,t.match?function(e,t,n){var r=e.match(t);if(!r)return"";var i=r.index||0,o=r[0];return e.slice(0,i)+n+o+n+e.slice(i+o.length)}(r,t.match,n):n+r+n})),e}),{valueWithErrors:e,criticalErrorsCount:0,firstFoundError:null})},C=function(e){var t,n=e.prevValue,i=e.newValue,o=e.isTestModeStrict,a=w(i),c=a.valueWithErrors,u=a.criticalErrorsCount,l=a.firstFoundError;if(!l)return{isCorrect:!0};var s=w(n).criticalErrorsCount;return o&&u>s?{isCorrect:!1}:{isCorrect:!1,error:l,valueToRender:(null===(t=c.match(/(\$[^$]+\$)|(#[^#]+#)|[^#$]+/g))||void 0===t?void 0:t.map((function(e){return e[0]===j||e[0]===m?{value:e.replace(new RegExp("[".concat(j+m,"]"),"g"),""),type:e[0]===j?r.error:r.warning}:{value:e,type:r.value}})))||[]}};!function(e){e.Plus="+",e.Minus="-",e.Div="\xf7",e.Mult="\xd7",e.Decimal=".",e.Colon=":"}(O||(O={}));var x="DEL_KEY",E={value:"",valueToRender:"",preResult:null,error:null,caretPosition:0},y=function(e){var t=e.state,n=e.testedInputValue,r=e.newValue,i=e.newCaretPosition;if(n.isCorrect){t.value=r;var o=p(r);o.isCorrect?(t.preResult=o.value,t.error=null):(t.preResult="",t.error=o.error),t.valueToRender=r,t.caretPosition=i}else n.valueToRender&&(t.value=r,n.error&&(t.error=n.error),t.valueToRender=n.valueToRender,t.preResult=null,t.caretPosition=i)},k=Object(f.b)({name:"mainInput",initialState:E,reducers:{generalOrDelKeyPressed:function(e,t){var n,r,i=t.payload,o=i===x?(n=e.value,0!==(r=e.caretPosition)?{newValue:n.slice(0,r-1)+n.slice(r),newCaretPosition:r-1,isTestModeStrict:!1}:{newValue:n.slice(1),newCaretPosition:r,isTestModeStrict:!1}):function(e,t,n){return{newValue:e.substring(0,t)+n+e.substring(t),newCaretPosition:t+1,isTestModeStrict:!0}}(e.value,e.caretPosition,i),a=o.newValue,c=o.newCaretPosition,u=o.isTestModeStrict,l=C({prevValue:e.value,newValue:a,isTestModeStrict:u});y({state:e,testedInputValue:l,newValue:a,newCaretPosition:c})},equalsKeyPressed:function(e){e.preResult&&!e.error?(e.value=e.preResult,e.valueToRender=e.value,e.preResult=null,e.caretPosition=e.value.length):e.preResult=e.error},clearAllKeyPressed:function(){return Object(v.a)({},E)},caretPositionChanged:function(e,t){e.caretPosition=t.payload},hardwareKeyPressed:function(e,t){var n=t.payload,r=n.newValue,i=n.newCaretPosition,o=n.isTestModeStrict,a=C({prevValue:e.value,newValue:t.payload.newValue,isTestModeStrict:o});y({state:e,testedInputValue:a,newValue:r,newCaretPosition:i})}}}),S=k.actions,P=S.generalOrDelKeyPressed,T=S.equalsKeyPressed,R=S.clearAllKeyPressed,M=S.caretPositionChanged,z=S.hardwareKeyPressed,L=k.reducer,N=Object(f.a)({reducer:{mainInput:L}}),V=n(36),F='"Roboto", "Helvetica", "Arial", sans-serif',I=function(e){return Object(V.a)({palette:{type:e?"dark":"light",primary:{main:"#ffc107"},secondary:{main:"#ff9100"}},typography:{fontSize:10,fontFamily:F}})},W=n(67),A=Object(W.a)((function(e){return{root:{height:"100%",width:"100%",background:e.palette.background.default},expressionInput:{background:e.palette.background.paper,height:"30%",position:"relative",boxShadow:"0px 0px 7px rgb(0 0 0 / 25%)"},keyboard:{height:"70%",maxWidth:"900px",margin:"0 auto"}}})),D=Object(W.a)((function(e){return{root:{cursor:"text",display:"flex",overflow:"auto","&::-webkit-scrollbar":{display:"none"},"scrollbar-width":"none"},input:{minHeight:64,position:"relative",whiteSpace:"nowrap",fontSize:function(e){return"".concat(e.fontSize,"rem")},marginLeft:"auto",padding:"0 ".concat(25,"px"),transition:"font-size 0.1s",outline:"none",display:"flex",alignItems:"center"},inputForCalculation:{whiteSpace:"nowrap",fontSize:function(e){return"".concat(e.fontSize,"rem")},visibility:"hidden",height:"0"},"@keyframes blinking":{"50%":{opacity:0}},blinkingAnimation:{animation:"$blinking 1.3s step-start 0s infinite"},caret:{background:e.palette.getContrastText(e.palette.background.default),width:2,height:function(e){return"".concat(e.fontSize+1,"rem")},position:"absolute",marginRight:"".concat(24,"px"),transition:"all 0.1s",pointerEvents:"none"}}})),K=function(e){var t=Object(c.useCallback)((function(t){e&&(e.scrollLeft-=t.deltaY)}),[e]);Object(c.useEffect)((function(){if(e)return e.addEventListener("mousewheel",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("mousewheel",t)}}),[e,t])},B=n(37),$=function(e){var t=e.onCaretPositionChange,n=e.caretElem,r=e.inputElem,i=Object(c.useCallback)((function(){var e=window.getSelection();if(e&&e.anchorNode!==n&&(null===r||void 0===r?void 0:r.contains(e.anchorNode))&&"Caret"===e.type){var i,o=null===(i=e.anchorNode)||void 0===i?void 0:i.parentElement,a=0;(null===r||void 0===r?void 0:r.children)&&r.children.length>1?Object(B.a)(null===r||void 0===r?void 0:r.children).find((function(t){var n;return t!==o?(a+=(null===(n=t.textContent)||void 0===n?void 0:n.length)||0,!1):(a+=e.anchorOffset,!0)})):a=e.anchorOffset,t(a)}}),[n,r,t]);Object(c.useEffect)((function(){return document.addEventListener("selectionchange",i),function(){document.removeEventListener("selectionchange",i)}}),[i])},U=function(e){var t=e.caretElem,n=e.valueOneString,r=e.isCursorVisible,i=e.blinkingAnimationClass,o=e.caretPosition,u=Object(c.useState)(!0),l=Object(a.a)(u,2),s=l[0],d=l[1],f=Object(c.useRef)();Object(c.useEffect)((function(){if(t)return s?t.classList.add(i):t.classList.remove(i),function(){t.classList.remove(i)}}),[s,i,t]),Object(c.useEffect)((function(){if(t&&r)return d(!1),f.current=setTimeout((function(){return d(!0)}),500),function(){f.current&&clearTimeout(f.current)}}),[n,o,t,r])},q=function(e){var t=e.textContent,n=document.createElement("canvas").getContext("2d");return n&&t?(n.font="".concat(getComputedStyle(e).fontSize," ").concat(F),n.measureText(t).width):null},_=function(e){var t=e.value,n=e.inputElem,r=e.inputRootElem,i=e.fontSize,o=e.minFontSize,u=Object(c.useState)(i),l=Object(a.a)(u,2),s=l[0],d=l[1],f=Object(c.useRef)(s);f.current=s;var v=Object(c.useCallback)((function(){if(r&&n&&o&&t){var e=r.clientWidth,a=q(n);if(null!==a){var c=100/a*e,u=f.current/100*c*.9;d(u>i?i:u<o?o:u)}}}),[t,i,o,r,n]);return Object(c.useEffect)((function(){return v(),window.addEventListener("resize",v),function(){return window.removeEventListener("resize",v)}}),[v]),s},H=function(e,t,n){var r=Object(c.useState)(0),i=Object(a.a)(r,2),o=i[0],u=i[1],l=Object(c.useCallback)((function(){if((null===e||void 0===e?void 0:e.firstChild)&&t)return setTimeout((function(){if((null===e||void 0===e?void 0:e.firstChild)&&t){var r=new Range;r.setStart(e.firstChild,n),r.setEnd(e.firstChild,t.length);var i=r.getBoundingClientRect().width;u(i)}}));u(0)}),[e,t,n]);return Object(c.useEffect)((function(){var e=l();return function(){e&&clearTimeout(e)}}),[l]),Object(c.useEffect)((function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[l]),o},J=function(e){var t=e.isInputFocused,n=e.valueOneString,r=e.caretPosition,i=e.onInput,o=e.onCaretPositionChange,a=e.onEqualsKeyPressed,u=Object(c.useCallback)((function(e){var t=n||"";if("="===e.key)a();else if("Backspace"===e.key)0!==r&&i(t.slice(0,r-1)+t.slice(r),r-1,!1);else if("Delete"===e.key)r!==t.length&&i(t.slice(0,r)+t.slice(r+1),r,!1);else if(1===e.key.length){var c=e.key.replace("/",O.Div).replace("*",O.Mult);i(t.substring(0,r)+c+t.substring(r),r+1,!0)}else"ArrowLeft"===e.key?r>0&&o(r-1):"ArrowRight"===e.key&&r<t.length&&o(r+1)}),[r,o,a,i,n]),l=Object(c.useCallback)((function(e){if(e.clipboardData){var t=n||"",o=e.clipboardData.getData("text/plain");i(t.substring(0,r)+o+t.substring(r),o.length,!1)}}),[r,i,n]);Object(c.useEffect)((function(){return t&&(document.addEventListener("keydown",u),document.addEventListener("paste",l)),function(){document.removeEventListener("keydown",u)}}),[t,u,l])},Y=function(e,t,n){var r=Object(c.useCallback)((function(){if(e&&t){var n=e.scrollLeft+25,r=e.scrollLeft+e.clientWidth-25,i=t.getBoundingClientRect().left+25+e.scrollLeft;i>n&&i<r||e.scrollTo({left:i-e.clientWidth,behavior:"smooth"})}}),[t,e]);Object(c.useEffect)((function(){r()}),[r,n])},G=n(2),X=function(e){var t=e.value,n=e.valueOneString,r=e.fontSize,i=void 0===r?1.6:r,o=e.minFontSize,a=e.caretPosition,u=e.onInput,l=e.onEqualsKeyPressed,s=e.onCaretPositionChange,d=!0,f=Object(c.useRef)(null),v=Object(c.useRef)(null),b=Object(c.useRef)(null),p=Object(c.useRef)(null);J({isInputFocused:d,valueOneString:n,caretPosition:a,onInput:u,onCaretPositionChange:s,onEqualsKeyPressed:l});var h=_({value:t,inputElem:v.current,inputRootElem:f.current,fontSize:i,minFontSize:o}),g=D({fontSize:h});K(f.current),$({caretElem:b.current,onCaretPositionChange:s,inputElem:v.current});var j=Object(c.useCallback)((function(){var e;null===(e=v.current)||void 0===e||e.focus({preventScroll:!0})}),[]);Object(c.useEffect)((function(){var e;null===(e=v.current)||void 0===e||e.focus()}),[d]),U({caretElem:b.current,caretPosition:a,valueOneString:n,isCursorVisible:!0,blinkingAnimationClass:g.blinkingAnimation});var m=H(p.current,n,a);return Y(f.current,b.current,n),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("div",{className:g.inputForCalculation,ref:p,children:n}),Object(G.jsx)("div",{className:g.root,ref:f,children:Object(G.jsxs)("div",{className:g.input,ref:v,onBlur:j,children:[t,Object(G.jsx)("span",{className:g.caret,ref:b,style:{right:m}})]})})]})},Q=u.c,Z=Object(W.a)((function(e){return{root:{height:"100%",display:"flex",justifyContent:"center",flexFlow:"column",textAlign:"right"},preResult:{height:"36px",fontSize:"2.5rem",marginRight:"25px",overflow:"auto",whiteSpace:"nowrap",color:e.palette.text.secondary}}})),ee=function(){return Date.now()+Math.random()},te=function(){var e=Z(),t=Q((function(e){return e.mainInput})),n=t.valueToRender,i=t.preResult,o=t.caretPosition,a=Object(u.b)(),l=Object(c.useCallback)((function(e){return a(M(e))}),[a]),s=Object(c.useCallback)((function(e,t,n){return a(z({newValue:e,newCaretPosition:t,isTestModeStrict:n}))}),[a]),d=Object(c.useCallback)((function(){return a(T())}),[a]),f=Object(c.useMemo)((function(){if("string"===typeof n)return n;var e=0;return n&&n.flatMap((function(t){var n=t.value;return e=null!==e?e+t.value.length:null,t.type===r.value?Object(G.jsx)("span",{children:n},ee()):Object(G.jsx)("span",{style:{color:t.type===r.error?"red":"orange"},children:n},ee())}))}),[n]),v="string"===typeof n?n:n&&n.reduce((function(e,t){return e+t.value}),"");return Object(G.jsxs)("div",{className:e.root,children:[Object(G.jsx)(X,{value:f,valueOneString:v,onInput:s,onEqualsKeyPressed:d,fontSize:5.5,minFontSize:3.5,caretPosition:o,onCaretPositionChange:l}),Object(G.jsx)("div",{className:e.preResult,children:i})]})},ne=n(38),re=n(68),ie=n(72),oe=n(73),ae=Object(W.a)((function(e){return{root:{height:"100%",background:e.palette.background.default},button:{flex:1,fontFamily:"Roboto",fontSize:"2.5rem"},rightButtons:{background:"dark"===e.palette.type?e.palette.grey[900]:e.palette.primary.main,color:e.palette.text.primary}}})),ce=function(){var e=ae(),t=Object(u.b)(),n=[["7","8","9"],["4","5","6"],["1","2","3"],[O.Decimal,"0",O.Colon]],r=[O.Div,O.Mult,O.Minus,O.Plus],i=Object(c.useCallback)((function(e){return t(P(e))}),[t]),o=Object(c.useCallback)((function(){return t(T())}),[t]),a=Object(c.useCallback)((function(){return t(P(x))}),[t]),l=Object(c.useCallback)((function(){navigator.vibrate(5)}),[]),s=Object(oe.a)(Object(c.useCallback)((function(){l(),t(R())}),[t,l]),{isPreventDefault:!1,delay:350}),d=function(t){var n=t.children,r=t.onTouchStart,i=Object(ne.a)(t,["children","onTouchStart"]);return Object(G.jsx)(ie.a,Object(v.a)(Object(v.a)({},i),{},{className:e.button,onTouchStart:function(e){l(),r&&r(e)},children:n}))};return Object(G.jsxs)(re.a,{className:e.root,container:!0,children:[Object(G.jsx)(re.a,{container:!0,item:!0,xs:9,children:n.map((function(e){return Object(G.jsx)(re.a,{item:!0,container:!0,xs:12,children:e.map((function(e){return Object(G.jsx)(d,{onMouseUp:function(){return i(e)},children:e},e.toString())}))},e.toString())}))}),Object(G.jsxs)(re.a,{className:e.rightButtons,container:!0,item:!0,xs:3,direction:"column",children:[Object(G.jsx)(d,Object(v.a)(Object(v.a)({},s),{},{onMouseUp:function(){a(),s.onMouseUp()},children:"DEL"})),r.map((function(e){return Object(G.jsx)(d,{onMouseUp:function(){return i(e)},children:e},e.toString())})),Object(G.jsx)(d,{onMouseUp:o,children:"="})]})]})},ue=function(){var e=A();return Object(G.jsxs)("div",{className:e.root,children:[Object(G.jsx)("div",{className:e.expressionInput,children:Object(G.jsx)(te,{})}),Object(G.jsx)("div",{className:e.keyboard,children:Object(G.jsx)(ce,{})})]})},le=function(){var e=Object(l.a)("(prefers-color-scheme: dark)"),t=Object(c.useMemo)((function(){return I(e)}),[e]),n=Object(c.useState)(!1),r=Object(a.a)(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){setTimeout((function(){return o(!0)}))}),[]),i?Object(G.jsx)(c.StrictMode,{children:Object(G.jsx)(u.a,{store:N,children:Object(G.jsxs)(s.a,{theme:t,children:[Object(G.jsx)(d.a,{}),Object(G.jsx)(ue,{})]})})}):null},se=(n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function de(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(G.jsx)(le,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/time-calculator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/time-calculator","/service-worker.js");se?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):de(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):de(t,e)}))}}()}},[[49,1,2]]]);
//# sourceMappingURL=main.efb7d0f6.chunk.js.map